<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Q-ltxhash</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#Macroprogramming">Macro programming</a> &gt; <a href="index.html#LaTeXmacrotoolsandtechniques">LaTeX macro tools and techniques</a> &gt; <a href="index.html#Q-ltxhash">Defining LaTeX commands within other commands</a>
</div>
<h1>Defining LaTeX commands within other commands</h1>


<p>

<p>
LaTeX command definition is significantly different from the TeX
primitive form discussed in an 
<a href="FAQ-hash.html">earlier question</a> about definitions within
macros.

<p>
In most ways, the LaTeX situation is simpler (at least in part
because it imposes more restrictions on the user); however, defining a
command within a command still requires some care.

<p>
The earlier question said you have to double the <code class="verb">#</code> signs in command
definitions: in fact, the same rule holds, except that LaTeX
already takes care of some of the issues, by generating argument lists
for you.

<p>
The basic problem is that:
<blockquote>
<pre>
\newcommand{\abc}[1]{joy, oh #1!%
  \newcommand{\ghi}[1]{gloom, oh #1!}%
}
</pre>
</blockquote>
followed by a call:
<blockquote>
<pre>
\cmdinvoke{abc}{joy}
</pre>
</blockquote>
typesets &ldquo;joy, oh joy!&rdquo;, but defines a command <code>&#x5c;ghi</code> that takes
one parameter, which it ignores; <code>&#x5c;ghi</code><code>&#x7b;gloom&#x7d;</code> will expand to
&ldquo;gloom, oh joy!&rdquo;, which is presumably not what was expected.

<p>
And (as you will probably guess, if you&rsquo;ve read the earlier question)
the definition:
<blockquote>
<pre>
\newcommand{\abc}[1]{joy, oh #1!%
  \newcommand{\ghi}[1]{gloom, oh ##1!}%
}
</pre>
</blockquote>
does what is required, and <code>&#x5c;ghi</code><code>&#x7b;gloom&#x7d;</code> will expand to
&ldquo;gloom, oh gloom!&rdquo;, whatever the argument to <code>&#x5c;abc</code>.

<p>
The doubling is needed whether or not the enclosing command has an
argument, so:
<blockquote>
<pre>
\newcommand{\abc}{joy, oh joy!%
  \newcommand{\ghi}[1]{gloom, oh ##1!}%
}
</pre>
</blockquote>
is needed to produce a replica of the <code>&#x5c;ghi</code> we defined earlier.

<p>

<hr><p class="faqlink">This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=ltxhash">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=ltxhash</a></p>
