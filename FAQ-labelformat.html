<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>How to change the format of labels</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#Macroprogramming">Macro programming</a> &gt; <a href="index.html#LaTeXmacroprogramming">LaTeX macro programming</a> &gt; <a href="index.html#Q-labelformat">How to change the format of labels</a>
</div>
<h1>How to change the format of labels</h1>


<p>

<p>
By default, when a label is created, it takes on the appearance of the
counter labelled, so the label appears as
<code>&#x5c;the</code><tt>&lsaquo;<i>counter</i>&rsaquo;</tt>&nbsp;&mdash; what would be used if you
asked to typeset the counter in your text.  This isn&rsquo;t always what you
need: for example, if you have nested enumerated lists with the outer
numbered and the inner labelled with letters, one might expect to want
to refer to items in the inner list as &ldquo;2(c)&rdquo;.   (Remember, you can
<a href="FAQ-enumerate.html">change the structure of list items</a>.)
The change is of course
possible by explicit labelling of the parent and using that label to
construct the typeset result&nbsp;&mdash; something like
<blockquote>
<pre>
\ref{parent-item}(\ref{child-item})
</pre>
</blockquote>
which would be both tedious and error-prone.  What&rsquo;s more, it would be
undesirable, since you would be constructing a visual representation
which is inflexible (you couldn&rsquo;t change all the references to elements
of a list at one fell swoop).

<p>
LaTeX in fact has a label-formatting command built into every label
definition; by default it&rsquo;s null, but it&rsquo;s available for the user to
program.  For any label &lsaquo;<i>counter</i>&rsaquo; there&rsquo;s a LaTeX internal
command <code>&#x5c;p@</code>&lsaquo;<i><tt>counter</tt></i>&rsaquo;; for example, a label definition
on an inner list item is supposedly done using the command
<code>&#x5c;p@enumii</code><code>&#x7b;<code>&#x5c;theenumii</code>&#x7d;</code>.  Unfortunately, the internal
workings of this aren&rsquo;t quite right, and you need to patch the
<code>&#x5c;refstepcounter</code> command:
<blockquote>
<pre>
\renewcommand*\refstepcounter[1]{%
  \stepcounter{#1}%
  \protected@edef\@currentlabel{%
    \csname p@#1\expandafter\endcsname
      \csname the#1\endcsname
  }%
}
</pre>
<pre>
\renewcommand*\refstepcounter[1]{\stepcounter{#1}%
  \protected@edef\@currentlabel{%
    \csname p@#1\expandafter\endcsname
      \csname the#1\endcsname
  }%
}
</pre>
</blockquote>
With the patch in place you can now, for example, change the labels on
all inner lists by adding the following code in your preamble:
<blockquote>
<pre>
\makeatletter
\renewcommand{\p@enumii}[1]{\theenumi(#1)}
\makeatother
</pre>
</blockquote>
This would make the labels for second-level enumerated lists appear as
&ldquo;1(a)&rdquo; (and so on).  The analogous change works for any counter that
gets used in a <code>&#x5c;label</code> command.

<p>
In fact, the <i class="package">fncylab</i> package does all the above (including
the patch to LaTeX itself).  With the package, the code above is
(actually quite efficiently) rendered by the command:
<blockquote>
<pre>
\labelformat{enumii}{\theenumi(#1)}
</pre>
</blockquote>
In fact, the above example, which we can do in several different ways,
has been rendered obsolete by the appearance of the <i class="package">enumitem</i>
package, which is discussed in the answer about 
<a href="FAQ-enumerate.html">decorating enumeration lists</a>.
<dl>
<dt class="ctanref">enumitem.sty</dt><dd><a class="ctan" href="https://www.ctan.org/pkg/enumitem">enumitem</a>
<dt class="ctanref">fncylab.sty</dt><dd><a class="ctan" href="https://www.ctan.org/pkg/fncylab">fncylab</a>
</dl>

<p>

<hr><p class="faqlink">This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=labelformat">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=labelformat</a></p>
