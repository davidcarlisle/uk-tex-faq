<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Q-nopagebrk</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#Adjustingthetypesetting">Adjusting the typesetting</a> &gt; <a href="index.html#Pagelayout">Page layout</a> &gt; <a href="index.html#Q-nopagebrk">Preventing page breaks between lines</a>
</div>
<h1>Preventing page breaks between lines</h1>


<p>

<p>
One commonly requires that a block of typeset material be kept on the
same page; it turns out to be surprisingly tricky to arrange this.

<p>
LaTeX provides a <code class="environment">samepage</code> environment which claims it
does this sort of thing for you.  It proceeds by setting infinite
penalties for all sorts of page-break situations; but in many
situations where you want to prevent a page break,
<code class="environment">samepage</code> doesn&rsquo;t help.  If you&rsquo;re trying to keep running
text together, you need to end the paragraph inside the environment
(see <a class="FAquestion.html" href="FAQ-paraparam.html">preserving paragraph parameters</a>).
Also, if the things you are trying to keep together insert their own
pagebreak hints, <code class="environment">samepage</code> has no power over them (though
list items&rsquo; attempts&nbsp;&mdash; they suggest page breaks between items&nbsp;&mdash;
are subverted by <code class="environment">samepage</code>).  Naturally, if
<code class="environment">samepage</code> <em>does</em> work, it is capable of leaving
stuff jutting out at the bottom of the page.

<p>
Another convenient trick is to set all the relevant stuff in a
<code>&#x5c;parbox</code> (or a <code class="environment">minipage</code> if it contains things like
verbatim text that may not be used in the argument of a <code>&#x5c;parbox</code>).
The resulting box certainly <em>won&rsquo;t</em> break between pages, but
that&rsquo;s not to say that it will actually do what you want it to do:
again, the box may be left jutting out at the bottom of the page.

<p>
Why do neither of these obvious things work?&nbsp;&mdash; Because TeX can&rsquo;t
really distinguish between infinitely awful things.
<code class="environment">Samepage</code> will make any possible break point &ldquo;infinitely
bad&rdquo; and boxes don&rsquo;t even offer the option of breaks, but if the
alternative is the leave an infinitely bad few centimetres of blank
paper at the bottom of the page, TeX will take the line of least
resistance and do nothing.

<p>
This problem still arises even if you have <code>&#x5c;raggedbottom</code> in
effect: TeX doesn&rsquo;t notice the value of <em>that</em> until it starts
actually shipping a page out.  One approach is to set:
<blockquote>
<pre>
\raggedbottom
\addtolength{\topskip}{0pt plus 10pt}
</pre>
</blockquote>
The <tt>10pt</tt> offers a hint to the output routine that the column is
stretchable; this will cause TeX to be more tolerant of the need to
stretch while building the page.  If you&rsquo;re doing this as a temporary
measure, cancel the change to <code>&#x5c;topskip</code> by:
<blockquote>
<pre>
\addtolength{\topskip}{0pt plus-10pt}
</pre>
</blockquote>
as well as resetting <code>&#x5c;flushbottom</code>.  (Note that the <tt>10pt</tt> never
actually shows up, because it is overwhelmed when the page is shipped
out by the stretchability introduced by <code>&#x5c;raggedbottom</code>; however, it
could well have an effect if <code>&#x5c;flushbottom</code> was in effect.)

<p>
An alternative (which derives from a suggestion by Knuth in the
TeXbook) is the package <i class="package">needspace</i> or the <i class="class">memoir</i> class,
which both define a command <code>&#x5c;needspace</code> whose argument tells it
what space is needed.  If the space isn&rsquo;t available, the current page
is cleared, and the matter that needs to be kept together will be
inserted on the new page.  For example, if 4&nbsp;lines of text need to be
kept together, the sequence
<blockquote>
<pre>
\par
\needspace{4\baselineskip}
% the stuff that must stay together
<text generating lines 1-4>
% now stuff we don't mind about
</pre>
</blockquote>
Yet another trick by Knuth is useful if you have a sequence of small
blocks of text that need, individually, to be kept on their own page.
Insert the command <code>&#x5c;filbreak</code> before each small block, and the
effect is achieved.  The technique can be used in the case of
sequences of LaTeX-style sections, by incorporating <code>&#x5c;filbreak</code>
into the definition of a command (as in 
<a class="FAquestion.html" href="FAQ-patch.html">patching commands</a>).  A simple and effective
patch would be:
<blockquote>
<pre>
\let\oldsubsubsection=\subsubsection
\renewcommand{\subsubsection}{%
  \filbreak
  \oldsubsubsection
}
</pre>
</blockquote>
While the trick works for consecutive sequences of blocks, it&rsquo;s
slightly tricky to get out of such sequences unless the sequence is
interrupted by a forced page break (such as <code>&#x5c;clearpage</code>, which may
be introduced by a <code>&#x5c;chapter</code> command, or the end of the document).
If the sequence is not interrupted, the last block is likely to be
forced onto a new page, regardless of whether it actually needs it.

<p>
If one is willing to accept that not everything can be accomplished
totally automatically, the way to go is to typeset the document and to
check for things that have the potential to give trouble.  In such a
scenario (which has Knuth&rsquo;s authority behind it, if one is to believe
the rather few words he says on the subject in the TeXbook) one can
decide, case by case, how to deal with problems at the last
proof-reading stage.  At this stage, you can manually alter page
breaking, using either <code>&#x5c;pagebreak</code> or <code>&#x5c;clearpage</code>, or you can
place a <code>&#x5c;nopagebreak</code> command to suppress unfortunate breaks.
Otherwise, you can make small adjustments to the page geometry, using
<code>&#x5c;enlargethispage</code>.  Supposing you have a line or two that stray:
issue the command <code>&#x5c;enlargethispage</code><code>&#x7b;2<code>&#x5c;baselineskip</code>&#x7d;</code> and
two lines are added to the page you&rsquo;re typesetting.  Whether this
looks impossibly awful or entirely acceptable depends on the document
context, but the command remains a useful item in the armoury.

<p>
Note that both <code>&#x5c;pagebreak</code> and <code>&#x5c;nopagebreak</code> take an optional
number argument to adjust how the command is to be interpreted.  Thus
<code>&#x5c;pagebreak</code><code>[0]</code>, the command &lsquo;suggests&rsquo; that a page break
might be worth doing, whereas <code>&#x5c;pagebreak</code><code>[4]</code> &lsquo;demands&rsquo; a
page break.  Similarly <code>&#x5c;nopagebreak</code><code>[0]</code> makes a suggestion,
while <code>&#x5c;nopagebreak</code><code>[4]</code> is a demand.  In both commands, the
default value of the optional argument is 4.
<dl>
<dt class="ctanref">memoir.cls</dt><dd><a class="ctan" href="https://www.ctan.org/pkg/memoir">memoir</a>
<dt class="ctanref">needspace.sty</dt><dd><a class="ctan" href="https://www.ctan.org/pkg/needspace">needspace</a>
</dl>

<p>

<hr><p class="faqlink">This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=nopagebrk">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=nopagebrk</a></p>
