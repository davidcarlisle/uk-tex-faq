<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Defining a macro from an argument</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#Macroprogramming">Macro programming</a> &gt; <a href="index.html#ldquoGenericrdquomacrosandtechniques">&ldquo;Generic&rdquo; macros and techniques</a> &gt; <a href="index.html#Q-csname">Defining a macro from an argument</a>
</div>
<h1>Defining a macro from an argument</h1>


<p>

<p>
It&rsquo;s common to want a command to create another command: often one
wants the new command&rsquo;s name to derive from an argument.  LaTeX
does this all the time: for example, <code>&#x5c;newenvironment</code> creates
start- and end-environment commands whose names are derived from the
name of the environment command.

<p>
The (seemingly) obvious approach:
<blockquote>
<pre>
\def\relay#1#2{\def\#1{#2}}
</pre>
</blockquote>
doesn&rsquo;t work (the TeX engine interprets it
as a rather strange redefinition of <code class="verb">&#x5c;#</code>).  The trick is to use
<code>&#x5c;csname</code>, which is a TeX primitive for generating command names
from random text, together with <code>&#x5c;expandafter</code>.  The definition
above should read:
<blockquote>
<pre>
\def\relay#1#2{%
  \expandafter\def\csname #1\endcsname{#2}%
}
</pre>
</blockquote>
With this definition, <code>&#x5c;relay</code><code>&#x7b;blah&#x7d;</code></code><code>&#x7b;bleah&#x7d;</code> is equivalent to
<code>&#x5c;def</code><code>&#x5c;blah</code><code>&#x7b;bleah&#x7d;</code>.

<p>
Note that the definition of <code>&#x5c;relay</code> omits the braces round the
&lsquo;command name&rsquo; in the <code>&#x5c;newcommand</code> it executes.  This is
because they&rsquo;re not necessary (in fact they seldom are), and in this
circumstance they make the macro code slightly more tedious.

<p>
The name created need not (of course) be <em>just</em> the argument:
<blockquote>
<pre>
\def\newrace#1#2#3{%
  \expandafter\def\csname start#1\endcsname{%
    #2%
  }%
  \expandafter\def\csname finish#1\endcsname{%
    #3%
  }%
}
</pre>
</blockquote>
With commands
<blockquote>
<pre>
\def\start#1{\csname start#1\endcsname}
\def\finish#1{\csname finish#1\endcsname}
</pre>
</blockquote>
these &lsquo;races&rsquo; could behave a bit like LaTeX environments.

<p>

<hr><p class="faqlink">This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=csname">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=csname</a></p>
