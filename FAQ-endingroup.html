<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Q-endingroup</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#ThejoyofTeXerrors">The joy of TeX errors</a> &gt; <a href="index.html#Q-endingroup"><code>&#x5c;end</code> occurred inside a group</a>
</div>
<h1><code>&#x5c;end</code> occurred inside a group</h1>


<p>

<p>
The actual error we observe is:

<p>

<code class="verb">&#x5c;end occurred inside a group at level &gt;</code><tt><em>n</em></tt><code class="verb">>)</code>

<p>

and it tells us that something we started in the document never got
finished before we ended the document itself.  The things involved
(&lsquo;groups&rsquo;) are what TeX uses for restricting the scope of things:
you see them, for example, in the &ldquo;traditional&rdquo; font selection
commands: <code class="verb">&#x7b;&#x5c;it stuff&#x7d;</code>&nbsp;&mdash; if the closing brace is left off such a
construct, the effect of <code>&#x5c;it</code> will last to the end of the document,
and you&rsquo;ll get the diagnostic.

<p>
TeX itself doesn&rsquo;t tell you where your problem is, but you can
often spot it by looking at the typeset output in a previewer.
Otherwise, you can usually find mismatched braces using an intelligent
editor (at least <i class="progname">emacs</i> and <i class="progname">winedt</i> offer this facility).
However, groups are not <em>only</em> created by matching
<tt>&#x7b;</tt> with <tt>&#x7d;</tt>:
other grouping commands are discussed elsewhere in these FAQs,
and are also a potential source of unclosed group.

<p>
<code>&#x5c;begin</code><code>&#x7b;&lsaquo;<i>environment</i>&rsaquo;&#x7d;</code> encloses the environment&rsquo;s body
in a group, and establishes its own diagnostic mechanism.  If you end
the document before closing some other environment, you get the
&lsquo;usual&rsquo; LaTeX diagnostic


<pre>
! LaTeX Error: \begin{blah} on input line 6
                       ended by \end{document}.
</pre>


<pre>
! LaTeX Error: \begin{blah} on input line 6 ended by \end{document}.
</pre>



<pre>
! LaTeX Error: \begin{blah} on input line 6 ended by \end{document}.
</pre>

which (though it doesn&rsquo;t tell you which <em>file</em> the
<code>&#x5c;begin</code><code>&#x7b;blah&#x7d;</code> was in) is usually enough to locate the
immediate problem.  If you press on past the LaTeX error, you get
one or more repetitions of the &ldquo;occurred inside a group&rdquo; message
before LaTeX finally exits.  The <i class="package">checkend</i> package
recognises other unclosed <code>&#x5c;begin</code><code>&#x7b;blob&#x7d;</code> commands, and
generates an &ldquo;ended by&rdquo; error message for each one, rather than
producing the &ldquo;occurred inside a group&rdquo; message, which is sometimes
useful (if you remember to load the package).

<p>
In the absence of such information from LaTeX, you need to use
&ldquo;traditional&rdquo; binary search to find the offending group.  Separate
the preamble from the body of your file, and process each half on its
own with the preamble; this tells you which half of the file is at
fault.  Divide again and repeat.  The process needs to be conducted
with care (it&rsquo;s obviously possible to split a correctly-written group
by chopping in the wrong place), but it will usually find the problem
fairly quickly.

<p>
e-TeX (and e-LaTeX&nbsp;&mdash; LaTeX run on e-TeX) gives you
further diagnostics after the traditional infuriating TeX one&nbsp;&mdash; it
actually keeps the information in a similar way to LaTeX:


<pre>
(\end occurred inside a group at level 3)

### semi simple group (level 3) entered
                         at line 6 (\begingroup)
### simple group (level 2) entered at line 5 ({)
### simple group (level 1) entered at line 4 ({)
### bottom level
</pre>


<pre>
(\end occurred inside a group at level 3)

### semi simple group (level 3) entered at line 6 (\begingroup)
### simple group (level 2) entered at line 5 ({)
### simple group (level 1) entered at line 4 ({)
### bottom level
</pre>



<pre>
(\end occurred inside a group at level 3)

### semi simple group (level 3) entered at line 6 (\begingroup)
### simple group (level 2) entered at line 5 ({)
### simple group (level 1) entered at line 4 ({)
### bottom level
</pre>

The diagnostic not only tells us where the group started, but also the
<em>way</em> it started: <code>&#x5c;begingroup</code> or <code class="verb">&#x7b;</code> (which is an alias of
<code>&#x5c;bgroup</code>, and the two are not  distinguishable at the TeX-engine
level).
<dl>
<dt class="ctanref">checkend.sty</dt><dd>Distributed as part of <a class="ctan" href="https://www.ctan.org/pkg/checkend">bezos</a>
</dl>

<p>

<hr><p class="faqlink">This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=endingroup">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=endingroup</a></p>
