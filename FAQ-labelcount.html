<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Q-labelcount</title>
<link rel="stylesheet" href="faq.css">
</head>
<body>
<div class="breadcrumbs">
<a href="index.html">FAQ</a> &gt; <a href="index.html#Macroprogramming">Macro programming</a> &gt; <a href="index.html#LaTeXmacrotoolsandtechniques">LaTeX macro tools and techniques</a> &gt; <a href="index.html#Q-labelcount">Using labels as counter values</a>
</div>
<h1>Using labels as counter values</h1>


<p>

<p>
Labels are tempting sources of &lsquo;numbers&rsquo;&nbsp;&mdash; their most common use,
after all, is simply to typeset a number.  However, their seeming
simplicity is deceptive; the packages <i class="package">babel</i> and
<i class="package">hyperref</i>, at least, fiddle with the definition of
<code>&#x5c;ref</code> and <code>&#x5c;pageref</code> in ways that make
<blockquote>
<pre>
\setcounter{foo}{\ref{bar}}
</pre>
</blockquote>
(etc.) not work; thus the technique may not be relied upon.

<p>
The solution is to use the <i class="package">refcount</i> package (incidentally,
by the author of <i class="package">hyperref</i>).  The package provides four
commands, all similar to:
<blockquote>
<pre>
\usepackage{refcount}
...
\label{bar}
...
\setcounterref{foo}{bar}
</pre>
</blockquote>
(the other three are <code>&#x5c;addtocounterref</code>, <code>&#x5c;setcounterpageref</code>
and <code>&#x5c;addtocounterpageref</code>).

<p>
The package also provides a command
<code>&#x5c;getrefnumber</code><code>&#x7b;label-name&#x7d;</code> that may be used where a
&lsquo;number&rsquo; value is needed.  For example:
<blockquote>
<pre>
... \footnote{foo bar ...\label{foofoot}}
...
\footnotemark[\getrefnumber{foofoot}]
</pre>
</blockquote>
which gives you a second footnote mark reference the the footnote.
(There is also a command <code>&#x5c;getpagerefnumber</code>, of course).

<p>
The commands could be used by one determined not to use
<i class="package">changepage</i> to determine whether 
<a href="FAQ-oddpage.html">the current page is odd</a>, but it&rsquo;s probably no more
trouble to use the fully-developed tool in this case.
<dl>
<dt class="ctanref">refount.sty</dt><dd>Distributed as part of <a class="ctan" href="https://www.ctan.org/pkg/oberdiek">oberdiek</a>
</dl>

<p class="lastedit">This answer last edited: 2011-09-08</p>
<p>This question on the Web: <a href="http://www.tex.ac.uk/cgi-bin/texfaq2html?label=Q-labelcount">http://www.tex.ac.uk/cgi-bin/texfaq2html?label=Q-labelcount</a>

<p>

<p>

<p>
